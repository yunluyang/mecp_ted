

<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>注册</title>
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css"
	media="all">
<link rel="stylesheet" href="../../layuiadmin/style/admin.css"
	media="all">
<link rel="stylesheet" href="../../layuiadmin/style/login.css"
	media="all">
</head>
<body>


	<div class="layadmin-user-login layadmin-user-display-show"
		id="LAY-user-login" style="display: none;">
		<div class="layadmin-user-login-main" >
			<div class="layadmin-user-login-box layadmin-user-login-header">
				<h2>旻投电力检测评估平台</h2>
			</div>
			<div class="layadmin-user-login-box layadmin-user-login-body layui-form" >
				<form method="post" action="../../register" class="layui-form"
					id="loginform">
					<div class="layui-form-item" >
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-cellphone"
							for="LAY-user-login-cellphone"></label> <input type="text"
							name="username" id="LAY-user-login-cellphone"
							lay-verify="username" placeholder="用户名:只支持12位以内英文字母、数字"  required
							class="layui-input">
					</div>

					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-password"
							for="LAY-user-login-password"></label> <input type="password"
							name="password" id="LAY-user-login-password" lay-verify="password" required
							placeholder="密码" class="layui-input" >
					</div>
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-group"
							for="LAY-user-login-repass"></label> <input type="password"
							name="repass" id="LAY-user-login-repass" lay-verify="repass" required
							placeholder="确认密码" class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-password"
							for="LAY-user-login-repass"></label> <input type="text"
							name="company"  required
							placeholder="公司名称"  class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-list"
							for="LAY-user-login-repass"></label> <input type="text"
							name="power_plant_name"  required
							placeholder="光伏电站名称"  class="layui-input">
					</div>
					
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-password"
							for="LAY-user-login-repass"></label> <input type="text"
							name="electricity"  required
							placeholder="光伏电站容量"  class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-location"
							for="LAY-user-login-repass"></label> <input type="text"
							name="province"  required
							placeholder="电站地址"  class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-location"
							for="LAY-user-login-repass"></label> <input type="text"
							name="contact_name" required
							placeholder="联系人"  class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<label
							class="layadmin-user-login-icon layui-icon layui-icon-location"
							for="LAY-user-login-repass"></label> <input type="text"
							name="phone" required
							placeholder="联系电话"  class="layui-input">
					</div>
					
					<div class="layui-form-item">
						<input type="checkbox" name="agreement" lay-skin="primary"
							title="同意用户协议" checked>
					</div>
					<div class="layui-form-item">
						<button class="layui-btn layui-btn-fluid" type="submit"
							lay-filter="LAY-user-reg-submit">注 册</button>
					</div>
				</form>
				<div class="layui-trans layui-form-item layadmin-user-login-other">
					<label>社交账号注册</label> <a href="javascript:;"><i
						class="layui-icon layui-icon-login-qq"></i></a> <a href="javascript:;"><i
						class="layui-icon layui-icon-login-wechat"></i></a> <a
						href="javascript:;"><i
						class="layui-icon layui-icon-login-weibo"></i></a> <a
						href="login.html"
						class="layadmin-user-jump-change layadmin-link layui-hide-xs">用已有帐号登入</a>
					<a href="login.html"
						class="layadmin-user-jump-change layadmin-link layui-hide-sm layui-show-xs-inline-block">登入</a>
				</div>
			</div>
		</div>

		<div class="layui-trans layadmin-user-login-footer">

			<p>
				© 2018 <a href="http://www.layui.com/" target="_blank">mecp.com</a>
			</p>
			<p>
				<span><a href="#"
					target="_blank">获取电话</a></span> <span><a
					href="#" target="_blank">在线联系</a></span> <span><a
					href="#" target="_blank">前往官网</a></span>
			</p>
		</div>

	</div>
	<script type="text/javascript" src="../../js/jquery-1.4.4.min.js"></script>
	<script type="text/javascript" src="../../js/jquery.form.js"></script>
	<script src="../../layuiadmin/layui/layui.js"></script>

	<script>
		layui
				.config({
					base : '../../layuiadmin/' //静态资源所在路径
				})
				.extend({
					index : 'lib/index' //主入口模块
				})
				.use(
						[ 'index', 'user' ],
						function() {
							var $ = layui.$, setter = layui.setter, admin = layui.admin, form = layui.form, router = layui
									.router();

							form.render();

							form.verify({
								username : function(value, item) { //value：表单的值、item：表单的DOM对象
									if (!new RegExp(
											"^[a-zA-Z0-9_\u4e00-\u9fa5\\s]+$")
											.test(value)) {
										return '用户名不能有特殊字符';
									}
									if (/[\u4E00-\u9FA5\uF900-\uFA2D]/
											.test(value)) {
										return '用户名不得使用中文';
									}
									if (/(^\_)|(\__)|(\_+$)/.test(value)) {
										return '用户名首尾不能出现下划线\'_\'';
									}
									if (/^\d+\d+\d$/.test(value)) {
										return '用户名不能全为数字';
									}
								}
							});

							//提交
							form.on(
											'submit(LAY-user-reg-submit)',
											function(obj) {
												var field = obj.field;

												//确认密码
												if (field.password !== field.repass) {
													return layer
															.msg('两次密码输入不一致');
												}

												//是否同意用户协议
												if (!field.agreement) {
													return layer
															.msg('你必须同意用户协议才能注册');
												}

												//请求接口
												/*  admin.req({
												   url: '../../register' //实际使用请改成服务端真实接口
												   ,data: field
												   ,done: function(res){
												       console.dir(res);        
												    layer.msg('注册成功', {
												       offset: '15px'
												       ,icon: 1
												       ,time: 1000
												     }, function(){
												       location.hash = '/user/login'; //跳转到登入页
												     }); 
												   }
												 }); */
												return false;
											}); 
							   
						});



		var options = {   
		        target:        '#output2',   // target element(s) to be updated with server response   
		       // beforeSubmit:  showRequest,  // pre-submit callback   
		        success:       
			        function(responseText, statusText){
					console.dir("success:"+statusText);
					console.dir("success:"+responseText.code);
					if(responseText.code==201){
						layer
						.msg(responseText.msg);
						}else{
							alert(responseText.msg);
							go(); 
							}
			        }    ,
		        dataType:  'json',        // 'xml', 'script', or 'json' (expected server response type)  
		   		timeout:   3000   
		        // other available options:   
		        //url:       url         // override for form's 'action' attribute   
		        //type:      type        // 'get' or 'post', override for form's 'method' attribute   
		    };  

	    function go(){
	    	window.location.href="login.html";
		    }

		$('#loginform').submit(
						function() {
							$(this).ajaxSubmit(options); 
							return false;
						});
	</script>
</body>
</html>